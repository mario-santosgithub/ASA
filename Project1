#include <iostream>
#include <vector>
#include <sstream>
#include <string>


struct P1 {
    int lastElement;
    int length;
};

// Prototypes
void problemOne();
void getSolutionsP1(P1 number);
void problemTwo();
void getSolutionsP2(int number);
int max(int n1, int n2);


// Global variables
std::vector<P1> sublists;
std::vector<int> firstInput, aux, aux2;
int maxLength = 0, counter=0, size1 = 1;

// Main function
int main() {
    int problem;
    std::cin >> problem; // reads the problem (first input line)

    if (problem == 1) {
        problemOne();
    }
    else if (problem == 2) {
        problemTwo();
    }
    return 0;
}

// Funtion to solve problem 1
void problemOne() {

    int f;
    P1 numberP1;
    std::string str, temp;
    std::stringstream ss;

    std::cin >> f;
    numberP1.lastElement = f;
    numberP1.length = 1;
    sublists.push_back(numberP1);

    std::getline(std::cin, str);
    ss << str;

    maxLength = 1;
    counter = 1;

    if (str == "") { std::cout << maxLength << " " << counter << std::endl; return; }
    
    while (!ss.eof()) {
  
        ss >> temp;
  
        if (std::stringstream(temp) >> f) {
            numberP1.lastElement = f;
            numberP1.length = 1;
            getSolutionsP1(numberP1);
        }
        temp = "";
    }

    std::cout << maxLength << " " << counter << std::endl;
    return;    
}

void getSolutionsP1(P1 number) {

    //printf("number: %d\n", number.lastElement);
    int added = -1;
    if (number.lastElement <= sublists[0].lastElement) {
        sublists.insert(sublists.begin(), number); 
        size1++;
        if (maxLength == number.length) { counter++; }
        //printf("added\n");
        return; 
    }

    for (int i=size1-1; i >= 0; i--) {

        if (number.lastElement > sublists[i].lastElement) {
            if (added == -1 || sublists[i].length+1 >= added) {
                //printf("maior\n");
                number.length = sublists[i].length+1;
                added = number.length; // adicionamos 7, e ficou com esta length armazenada agr em added 
                //printf("added with lenght %d\n", number.length);
                //printf("sublistELement: %d\n", sublists[i].lastElement);

                size1++;
            }
            else {
                break;
            }

            if (number.length > maxLength) { 
                maxLength++;
                counter = 1;
                sublists.push_back(number);
            }
            else if (number.length == maxLength) {
                counter++;
                sublists.push_back(number);
            }
            else {
                int j = size1-1;
                while (number.length != sublists[j].length) {
                    j--;
                }
                sublists.insert(sublists.begin()+j, number);


                /*printf("n[i] %d\n", sublists[size-2].lastElement);
                printf("number %d\n", number.lastElement);
                numberP1 = sublists[size-2];
                sublists[size-2] = number;
                sublists[size-1] = numberP1;*/
            }
        }
    }
}

void problemTwo() {

    int f, value;
    std::string str, temp;
    std::stringstream ss, ss1;
    std::cin >> f;
    firstInput.push_back(f);

    std::getline(std::cin, str);
    ss << str;
    
    // receives the first input and stores it in a vector
    while (!ss.eof()) {
        ss >> temp;
        if (std::stringstream(temp) >> f) {
            firstInput.push_back(f);
            size1++;
        }
        temp = "";
    }

    // second input
    std::cin >> f;
    int b=0;
    for(int i=0; i < size1; i++) {
        
        if (b == 0) {
            if (f == firstInput[i]) {
                value = 1;
                b=1;
            }
            else {
                value = 0;
            }
        }
        else { value = 1; }

    
        aux.push_back(value);
    }
    // aux fica cheia com a primeira linha da "matriz"

    std::getline(std::cin, str);
    ss1 << str;


    while(!ss1.eof()) {
        ss1 >> temp;
        if (std::stringstream(temp) >> f) {
            getSolutionsP2(f);
        }

        aux = aux2;
        aux2.clear();
        temp = "";
    }

    maxLength = aux[size1-1];
    std::cout << maxLength << std::endl;

}

int max(int n1, int n2) {
    if (n1 >= n2) {
        return n1;
    }
    else {
        return n2;
    }
}


void getSolutionsP2(int number) {

    int value;
    for (int i=0; i < size1; i++) {

        if (i == 0) { // first position
            if ((aux[0] == 1) || (number == firstInput[i])) {
                value = 1;
            }
            else { value = 0; }
        }
        else { 
            if (number == firstInput[i] && number > firstInput[i-1]) {
                value = aux[i-1] + 1;
            }
            /*else if (number == firstInput[i]) {
                value = aux[i-1] + 1;
            }*/
            else { value = max(aux2[i-1], aux[i]); }
        }

        aux2.push_back(value);
    } 
    /*printf("aux\n");
    for (int k:aux) {
        printf("%d ", k);
    } 
    printf("\n");
    printf("aux2\n");
    for (int k: aux2) {
        printf("%d ", k);
    }
    printf("\n");*/
}
